<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>厄索斯</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/icon.png">
    <meta name="description" content="厄索斯">
    
    <link rel="preload" href="/assets/css/0.styles.c7cd9109.css" as="style"><link rel="preload" href="/assets/js/app.d98f75d3.js" as="script"><link rel="preload" href="/assets/js/7.9b6d0533.js" as="script"><link rel="preload" href="/assets/js/16.003392c7.js" as="script"><link rel="prefetch" href="/assets/js/1.2c63f614.js"><link rel="prefetch" href="/assets/js/10.cc5d14b9.js"><link rel="prefetch" href="/assets/js/100.c8f44be0.js"><link rel="prefetch" href="/assets/js/101.795b3d75.js"><link rel="prefetch" href="/assets/js/102.aaec7d00.js"><link rel="prefetch" href="/assets/js/103.2d2b0842.js"><link rel="prefetch" href="/assets/js/104.eb790654.js"><link rel="prefetch" href="/assets/js/105.a7704875.js"><link rel="prefetch" href="/assets/js/106.8ab9cd83.js"><link rel="prefetch" href="/assets/js/107.ee3ce424.js"><link rel="prefetch" href="/assets/js/108.08e2cedb.js"><link rel="prefetch" href="/assets/js/109.877c3f78.js"><link rel="prefetch" href="/assets/js/11.c24817ef.js"><link rel="prefetch" href="/assets/js/110.f5da30a6.js"><link rel="prefetch" href="/assets/js/111.f2577856.js"><link rel="prefetch" href="/assets/js/112.b680de7f.js"><link rel="prefetch" href="/assets/js/113.4d4df4c4.js"><link rel="prefetch" href="/assets/js/114.30de0066.js"><link rel="prefetch" href="/assets/js/115.d5ecc68f.js"><link rel="prefetch" href="/assets/js/116.6147f600.js"><link rel="prefetch" href="/assets/js/117.3c3956df.js"><link rel="prefetch" href="/assets/js/118.daae1fb1.js"><link rel="prefetch" href="/assets/js/119.436d3d29.js"><link rel="prefetch" href="/assets/js/12.ab5f7c80.js"><link rel="prefetch" href="/assets/js/120.1095d1d6.js"><link rel="prefetch" href="/assets/js/121.9f460f74.js"><link rel="prefetch" href="/assets/js/122.6fa65276.js"><link rel="prefetch" href="/assets/js/123.21855554.js"><link rel="prefetch" href="/assets/js/124.94f826a4.js"><link rel="prefetch" href="/assets/js/125.09bdd832.js"><link rel="prefetch" href="/assets/js/126.8d53ae81.js"><link rel="prefetch" href="/assets/js/127.4cb9031f.js"><link rel="prefetch" href="/assets/js/128.2f929363.js"><link rel="prefetch" href="/assets/js/129.0164eea0.js"><link rel="prefetch" href="/assets/js/13.89dc7a50.js"><link rel="prefetch" href="/assets/js/130.f39a3d30.js"><link rel="prefetch" href="/assets/js/131.084ce4d5.js"><link rel="prefetch" href="/assets/js/132.ee4812c0.js"><link rel="prefetch" href="/assets/js/133.f1302ee1.js"><link rel="prefetch" href="/assets/js/134.11df087f.js"><link rel="prefetch" href="/assets/js/135.1a2c8799.js"><link rel="prefetch" href="/assets/js/136.ca35b1d9.js"><link rel="prefetch" href="/assets/js/137.c1c23e5a.js"><link rel="prefetch" href="/assets/js/138.df2c8355.js"><link rel="prefetch" href="/assets/js/139.6157decf.js"><link rel="prefetch" href="/assets/js/14.3fc06e57.js"><link rel="prefetch" href="/assets/js/140.4c38a48a.js"><link rel="prefetch" href="/assets/js/141.55c239b4.js"><link rel="prefetch" href="/assets/js/142.367377a7.js"><link rel="prefetch" href="/assets/js/143.8a9e6059.js"><link rel="prefetch" href="/assets/js/144.00e6656d.js"><link rel="prefetch" href="/assets/js/145.84cfacef.js"><link rel="prefetch" href="/assets/js/146.d978c83e.js"><link rel="prefetch" href="/assets/js/147.a686cf28.js"><link rel="prefetch" href="/assets/js/148.e49d61a9.js"><link rel="prefetch" href="/assets/js/149.3910416e.js"><link rel="prefetch" href="/assets/js/15.18eacd20.js"><link rel="prefetch" href="/assets/js/150.3d9b5905.js"><link rel="prefetch" href="/assets/js/151.d990fa49.js"><link rel="prefetch" href="/assets/js/152.8d8a08ae.js"><link rel="prefetch" href="/assets/js/153.d51531ce.js"><link rel="prefetch" href="/assets/js/154.d374b646.js"><link rel="prefetch" href="/assets/js/155.e9153498.js"><link rel="prefetch" href="/assets/js/156.2295824e.js"><link rel="prefetch" href="/assets/js/157.221f67d7.js"><link rel="prefetch" href="/assets/js/158.8d252154.js"><link rel="prefetch" href="/assets/js/159.bb952efd.js"><link rel="prefetch" href="/assets/js/160.69b9d123.js"><link rel="prefetch" href="/assets/js/161.00964eb4.js"><link rel="prefetch" href="/assets/js/162.197ee17a.js"><link rel="prefetch" href="/assets/js/163.caf0dd1b.js"><link rel="prefetch" href="/assets/js/164.27d90c5e.js"><link rel="prefetch" href="/assets/js/165.40e17a44.js"><link rel="prefetch" href="/assets/js/166.9abc86d0.js"><link rel="prefetch" href="/assets/js/167.2de82e8a.js"><link rel="prefetch" href="/assets/js/168.ba4950d5.js"><link rel="prefetch" href="/assets/js/169.f0c8adfc.js"><link rel="prefetch" href="/assets/js/17.2edc3b56.js"><link rel="prefetch" href="/assets/js/170.a6e3bb7d.js"><link rel="prefetch" href="/assets/js/171.593e2067.js"><link rel="prefetch" href="/assets/js/172.36cd1436.js"><link rel="prefetch" href="/assets/js/173.6b57ad74.js"><link rel="prefetch" href="/assets/js/174.03337b28.js"><link rel="prefetch" href="/assets/js/175.4f6a4c1f.js"><link rel="prefetch" href="/assets/js/176.09f161df.js"><link rel="prefetch" href="/assets/js/177.2213b875.js"><link rel="prefetch" href="/assets/js/178.cafdf490.js"><link rel="prefetch" href="/assets/js/179.feacf7af.js"><link rel="prefetch" href="/assets/js/18.f505ab09.js"><link rel="prefetch" href="/assets/js/180.bf1dbeef.js"><link rel="prefetch" href="/assets/js/181.d276a202.js"><link rel="prefetch" href="/assets/js/182.03ac25a5.js"><link rel="prefetch" href="/assets/js/183.b47e8331.js"><link rel="prefetch" href="/assets/js/184.25ea842d.js"><link rel="prefetch" href="/assets/js/185.2248daa0.js"><link rel="prefetch" href="/assets/js/186.a741edc6.js"><link rel="prefetch" href="/assets/js/187.c49038cb.js"><link rel="prefetch" href="/assets/js/188.5a0b84b4.js"><link rel="prefetch" href="/assets/js/189.e57ab776.js"><link rel="prefetch" href="/assets/js/19.2c169746.js"><link rel="prefetch" href="/assets/js/190.a9a5cc1c.js"><link rel="prefetch" href="/assets/js/191.b2afd445.js"><link rel="prefetch" href="/assets/js/192.3e160249.js"><link rel="prefetch" href="/assets/js/193.2e244d10.js"><link rel="prefetch" href="/assets/js/194.0cca6a12.js"><link rel="prefetch" href="/assets/js/195.8739fd87.js"><link rel="prefetch" href="/assets/js/196.a2bb2397.js"><link rel="prefetch" href="/assets/js/197.956fc688.js"><link rel="prefetch" href="/assets/js/198.66f69c0f.js"><link rel="prefetch" href="/assets/js/199.b827fc45.js"><link rel="prefetch" href="/assets/js/2.21097652.js"><link rel="prefetch" href="/assets/js/20.6e0f26b3.js"><link rel="prefetch" href="/assets/js/200.4b00ce4c.js"><link rel="prefetch" href="/assets/js/201.9b0c1e1e.js"><link rel="prefetch" href="/assets/js/202.a9af8076.js"><link rel="prefetch" href="/assets/js/203.c0be8adc.js"><link rel="prefetch" href="/assets/js/204.8bcc79bc.js"><link rel="prefetch" href="/assets/js/205.00c3c477.js"><link rel="prefetch" href="/assets/js/206.20684736.js"><link rel="prefetch" href="/assets/js/207.c3bae5d4.js"><link rel="prefetch" href="/assets/js/208.f4893253.js"><link rel="prefetch" href="/assets/js/209.bcbcbbc0.js"><link rel="prefetch" href="/assets/js/21.b2bf15f4.js"><link rel="prefetch" href="/assets/js/210.e9e5e48d.js"><link rel="prefetch" href="/assets/js/211.a0a8a270.js"><link rel="prefetch" href="/assets/js/212.5c02eaf1.js"><link rel="prefetch" href="/assets/js/213.6294a9ff.js"><link rel="prefetch" href="/assets/js/214.3ed1eb4d.js"><link rel="prefetch" href="/assets/js/215.8f25e14f.js"><link rel="prefetch" href="/assets/js/216.a87422ef.js"><link rel="prefetch" href="/assets/js/217.04172ea8.js"><link rel="prefetch" href="/assets/js/218.cc7e2ed1.js"><link rel="prefetch" href="/assets/js/219.85486019.js"><link rel="prefetch" href="/assets/js/22.48c2b927.js"><link rel="prefetch" href="/assets/js/220.ec7c320c.js"><link rel="prefetch" href="/assets/js/221.28e9c245.js"><link rel="prefetch" href="/assets/js/222.16544296.js"><link rel="prefetch" href="/assets/js/223.c5c1ce99.js"><link rel="prefetch" href="/assets/js/224.6880421a.js"><link rel="prefetch" href="/assets/js/225.c3f92a83.js"><link rel="prefetch" href="/assets/js/226.40f270aa.js"><link rel="prefetch" href="/assets/js/227.d62c2d8a.js"><link rel="prefetch" href="/assets/js/228.aba13d31.js"><link rel="prefetch" href="/assets/js/229.44ca3451.js"><link rel="prefetch" href="/assets/js/23.f0c36b62.js"><link rel="prefetch" href="/assets/js/230.3b213ef9.js"><link rel="prefetch" href="/assets/js/231.28b50ce4.js"><link rel="prefetch" href="/assets/js/232.fa39e933.js"><link rel="prefetch" href="/assets/js/233.ac4d0586.js"><link rel="prefetch" href="/assets/js/234.071e87e4.js"><link rel="prefetch" href="/assets/js/235.868144c0.js"><link rel="prefetch" href="/assets/js/236.0296f995.js"><link rel="prefetch" href="/assets/js/237.403a3412.js"><link rel="prefetch" href="/assets/js/238.daea8867.js"><link rel="prefetch" href="/assets/js/239.eb087f06.js"><link rel="prefetch" href="/assets/js/24.e8f8e362.js"><link rel="prefetch" href="/assets/js/240.d4ab8404.js"><link rel="prefetch" href="/assets/js/241.97c9fbd3.js"><link rel="prefetch" href="/assets/js/242.6704d369.js"><link rel="prefetch" href="/assets/js/243.0e033d3e.js"><link rel="prefetch" href="/assets/js/244.044ecbf1.js"><link rel="prefetch" href="/assets/js/245.410785ce.js"><link rel="prefetch" href="/assets/js/246.14c088a3.js"><link rel="prefetch" href="/assets/js/247.9884e5e0.js"><link rel="prefetch" href="/assets/js/248.a846fce2.js"><link rel="prefetch" href="/assets/js/249.97495793.js"><link rel="prefetch" href="/assets/js/25.647a5e87.js"><link rel="prefetch" href="/assets/js/250.a4e51ca4.js"><link rel="prefetch" href="/assets/js/251.b8ca7adb.js"><link rel="prefetch" href="/assets/js/252.37cd53f8.js"><link rel="prefetch" href="/assets/js/253.9601a997.js"><link rel="prefetch" href="/assets/js/254.05042942.js"><link rel="prefetch" href="/assets/js/255.c5861c26.js"><link rel="prefetch" href="/assets/js/256.8fcbdd02.js"><link rel="prefetch" href="/assets/js/257.67510f4b.js"><link rel="prefetch" href="/assets/js/258.91805015.js"><link rel="prefetch" href="/assets/js/259.511ee284.js"><link rel="prefetch" href="/assets/js/26.c1cfda81.js"><link rel="prefetch" href="/assets/js/260.a56226e0.js"><link rel="prefetch" href="/assets/js/261.d4cf1ac5.js"><link rel="prefetch" href="/assets/js/262.d16e1f07.js"><link rel="prefetch" href="/assets/js/263.face0a4b.js"><link rel="prefetch" href="/assets/js/264.10e85017.js"><link rel="prefetch" href="/assets/js/265.bb6823f6.js"><link rel="prefetch" href="/assets/js/266.3d568f9b.js"><link rel="prefetch" href="/assets/js/267.3b7928eb.js"><link rel="prefetch" href="/assets/js/268.8cff3378.js"><link rel="prefetch" href="/assets/js/269.eae18960.js"><link rel="prefetch" href="/assets/js/27.d0336482.js"><link rel="prefetch" href="/assets/js/270.46032f02.js"><link rel="prefetch" href="/assets/js/28.d717b1f5.js"><link rel="prefetch" href="/assets/js/29.2b3ed4c1.js"><link rel="prefetch" href="/assets/js/3.8fe6c5b7.js"><link rel="prefetch" href="/assets/js/30.71461641.js"><link rel="prefetch" href="/assets/js/31.f2001d9e.js"><link rel="prefetch" href="/assets/js/32.5bdb44b7.js"><link rel="prefetch" href="/assets/js/33.d1508194.js"><link rel="prefetch" href="/assets/js/34.88fedc22.js"><link rel="prefetch" href="/assets/js/35.25f52724.js"><link rel="prefetch" href="/assets/js/36.8650cfcb.js"><link rel="prefetch" href="/assets/js/37.34d337cc.js"><link rel="prefetch" href="/assets/js/38.0b5c0c3d.js"><link rel="prefetch" href="/assets/js/39.64841af4.js"><link rel="prefetch" href="/assets/js/4.0354a99a.js"><link rel="prefetch" href="/assets/js/40.53c7bd37.js"><link rel="prefetch" href="/assets/js/41.12b90b8d.js"><link rel="prefetch" href="/assets/js/42.632cb960.js"><link rel="prefetch" href="/assets/js/43.31422ca0.js"><link rel="prefetch" href="/assets/js/44.2f1ec7a7.js"><link rel="prefetch" href="/assets/js/45.f242a906.js"><link rel="prefetch" href="/assets/js/46.67d7d1e4.js"><link rel="prefetch" href="/assets/js/47.8d28b24f.js"><link rel="prefetch" href="/assets/js/48.06caeae2.js"><link rel="prefetch" href="/assets/js/49.21eaf609.js"><link rel="prefetch" href="/assets/js/5.d2b0b862.js"><link rel="prefetch" href="/assets/js/50.97ad10e3.js"><link rel="prefetch" href="/assets/js/51.2e71e75c.js"><link rel="prefetch" href="/assets/js/52.c6d671f3.js"><link rel="prefetch" href="/assets/js/53.bc0d5dc2.js"><link rel="prefetch" href="/assets/js/54.d9f936ea.js"><link rel="prefetch" href="/assets/js/55.3002fb0a.js"><link rel="prefetch" href="/assets/js/56.8f9707bc.js"><link rel="prefetch" href="/assets/js/57.b602b7ce.js"><link rel="prefetch" href="/assets/js/58.15366835.js"><link rel="prefetch" href="/assets/js/59.c0c54498.js"><link rel="prefetch" href="/assets/js/60.b322f4c9.js"><link rel="prefetch" href="/assets/js/61.a1134c78.js"><link rel="prefetch" href="/assets/js/62.85e02486.js"><link rel="prefetch" href="/assets/js/63.d5d33b82.js"><link rel="prefetch" href="/assets/js/64.5d8d1885.js"><link rel="prefetch" href="/assets/js/65.76eb3fe3.js"><link rel="prefetch" href="/assets/js/66.f62a6671.js"><link rel="prefetch" href="/assets/js/67.dae8c600.js"><link rel="prefetch" href="/assets/js/68.deaed188.js"><link rel="prefetch" href="/assets/js/69.15d8cdee.js"><link rel="prefetch" href="/assets/js/70.d2c29e20.js"><link rel="prefetch" href="/assets/js/71.d17c01f3.js"><link rel="prefetch" href="/assets/js/72.44b6d918.js"><link rel="prefetch" href="/assets/js/73.50c13da3.js"><link rel="prefetch" href="/assets/js/74.5cb28037.js"><link rel="prefetch" href="/assets/js/75.05deb588.js"><link rel="prefetch" href="/assets/js/76.5f62dbf6.js"><link rel="prefetch" href="/assets/js/77.99601b23.js"><link rel="prefetch" href="/assets/js/78.edb6c2b5.js"><link rel="prefetch" href="/assets/js/79.f2ad254b.js"><link rel="prefetch" href="/assets/js/8.a68d98c9.js"><link rel="prefetch" href="/assets/js/80.f3e863a8.js"><link rel="prefetch" href="/assets/js/81.417d38a3.js"><link rel="prefetch" href="/assets/js/82.4a0a5c47.js"><link rel="prefetch" href="/assets/js/83.df57062c.js"><link rel="prefetch" href="/assets/js/84.ef963e13.js"><link rel="prefetch" href="/assets/js/85.e64fbc8a.js"><link rel="prefetch" href="/assets/js/86.ed6d8d4b.js"><link rel="prefetch" href="/assets/js/87.fa1ec07f.js"><link rel="prefetch" href="/assets/js/88.30a7489f.js"><link rel="prefetch" href="/assets/js/89.cf14fa85.js"><link rel="prefetch" href="/assets/js/9.6988d7b0.js"><link rel="prefetch" href="/assets/js/90.29ec7531.js"><link rel="prefetch" href="/assets/js/91.730bb06e.js"><link rel="prefetch" href="/assets/js/92.b798233d.js"><link rel="prefetch" href="/assets/js/93.7b01b894.js"><link rel="prefetch" href="/assets/js/94.43472e9c.js"><link rel="prefetch" href="/assets/js/95.7bc57d03.js"><link rel="prefetch" href="/assets/js/96.c1dc8585.js"><link rel="prefetch" href="/assets/js/97.f93c94db.js"><link rel="prefetch" href="/assets/js/98.d44e7bc5.js"><link rel="prefetch" href="/assets/js/99.d4d46160.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c7cd9109.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/newlogo.png" alt="厄索斯" class="logo"> <span class="site-name can-hide">厄索斯</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/typescript/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FrontEnd" class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="FrontEnd" class="mobile-dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interview/" class="nav-link">
  前端乱炖
</a></li><li class="dropdown-subitem"><a href="/ECMAScript/" class="nav-link">
  ECMAScript ES6-ES11
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress/" class="nav-link">
  VuePress
</a></li><li class="dropdown-subitem"><a href="/vueAnalysis/introduction/" class="nav-link">
  Vue源码分析
</a></li></ul></li><li class="dropdown-item"><h4>
          自动化测试
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/test/vueTest.html" class="nav-link">
  Vue应用测试
</a></li></ul></li><li class="dropdown-item"><h4>
          JavaScript书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/javascript/know-up.html" class="nav-link">
  你不知道的JavaScript(上)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/know-down.html" class="nav-link">
  你不知道的JavaScript(中下)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/red-book.html" class="nav-link">
  JavaScript高级程序设计
</a></li><li class="dropdown-subitem"><a href="/books/javascript/algorithm.html" class="nav-link">
  JavaScript数据结构和算法
</a></li><li class="dropdown-subitem"><a href="/designPattern/" class="nav-link">
  JavaScript设计模式与开发实践
</a></li><li class="dropdown-subitem"><a href="/books/javascript/es6.html" class="nav-link">
  深入理解ES6
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BackEnd" class="dropdown-title"><span class="title">BackEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="BackEnd" class="mobile-dropdown-title"><span class="title">BackEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          后端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/node/koa.html" class="nav-link">
  📚 Koa2文档 
</a></li><li class="dropdown-subitem"><a href="/backend/mysql.html" class="nav-link">
  📚 Mysql文档
</a></li><li class="dropdown-subitem"><a href="/backend/redisdocs.html" class="nav-link">
  📚 Redis文档
</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">
  📚 Docker文档
</a></li></ul></li><li class="dropdown-item"><h4>
          服务器环境部署
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/centos.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  阿里云部署Nginx(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/node.html" class="nav-link">
  阿里云部署Node&amp;pm2(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/mysql.html" class="nav-link">
  阿里云部署Mysql(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/redisinstall.html" class="nav-link">
  阿里云部署Redis(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/https.html" class="nav-link">
  Lets Encrypt生成https证书
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DevTools" class="dropdown-title"><span class="title">DevTools</span> <span class="arrow down"></span></button> <button type="button" aria-label="DevTools" class="mobile-dropdown-title"><span class="title">DevTools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          常用工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webpack/" class="nav-link">
  📚 Webpack
</a></li><li class="dropdown-subitem"><a href="/books/git/" class="nav-link">
  📚 Git
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          外部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 Linux命令大全
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://www.xmanv.com/" target="_blank" rel="noopener noreferrer" class="repo-link">
    MyBlog
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/typescript/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FrontEnd" class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="FrontEnd" class="mobile-dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interview/" class="nav-link">
  前端乱炖
</a></li><li class="dropdown-subitem"><a href="/ECMAScript/" class="nav-link">
  ECMAScript ES6-ES11
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress/" class="nav-link">
  VuePress
</a></li><li class="dropdown-subitem"><a href="/vueAnalysis/introduction/" class="nav-link">
  Vue源码分析
</a></li></ul></li><li class="dropdown-item"><h4>
          自动化测试
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/test/vueTest.html" class="nav-link">
  Vue应用测试
</a></li></ul></li><li class="dropdown-item"><h4>
          JavaScript书籍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/javascript/know-up.html" class="nav-link">
  你不知道的JavaScript(上)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/know-down.html" class="nav-link">
  你不知道的JavaScript(中下)
</a></li><li class="dropdown-subitem"><a href="/books/javascript/red-book.html" class="nav-link">
  JavaScript高级程序设计
</a></li><li class="dropdown-subitem"><a href="/books/javascript/algorithm.html" class="nav-link">
  JavaScript数据结构和算法
</a></li><li class="dropdown-subitem"><a href="/designPattern/" class="nav-link">
  JavaScript设计模式与开发实践
</a></li><li class="dropdown-subitem"><a href="/books/javascript/es6.html" class="nav-link">
  深入理解ES6
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BackEnd" class="dropdown-title"><span class="title">BackEnd</span> <span class="arrow down"></span></button> <button type="button" aria-label="BackEnd" class="mobile-dropdown-title"><span class="title">BackEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          后端开发
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/node/koa.html" class="nav-link">
  📚 Koa2文档 
</a></li><li class="dropdown-subitem"><a href="/backend/mysql.html" class="nav-link">
  📚 Mysql文档
</a></li><li class="dropdown-subitem"><a href="/backend/redisdocs.html" class="nav-link">
  📚 Redis文档
</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">
  📚 Docker文档
</a></li></ul></li><li class="dropdown-item"><h4>
          服务器环境部署
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/centos.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  阿里云部署Nginx(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/node.html" class="nav-link">
  阿里云部署Node&amp;pm2(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/mysql.html" class="nav-link">
  阿里云部署Mysql(CentOs7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/redisinstall.html" class="nav-link">
  阿里云部署Redis(CentOS7.5)
</a></li><li class="dropdown-subitem"><a href="/backend/https.html" class="nav-link">
  Lets Encrypt生成https证书
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DevTools" class="dropdown-title"><span class="title">DevTools</span> <span class="arrow down"></span></button> <button type="button" aria-label="DevTools" class="mobile-dropdown-title"><span class="title">DevTools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          常用工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webpack/" class="nav-link">
  📚 Webpack
</a></li><li class="dropdown-subitem"><a href="/books/git/" class="nav-link">
  📚 Git
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          外部链接
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📚 Linux命令大全
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://www.xmanv.com/" target="_blank" rel="noopener noreferrer" class="repo-link">
    MyBlog
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/centos.html#准备环境及安装" class="sidebar-link">准备环境及安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/centos.html#阿里云centos安装nginx所需环境" class="sidebar-link">阿里云CentOS安装Nginx所需环境</a></li><li class="sidebar-sub-header"><a href="/backend/centos.html#阿里云centos开始安装nignx" class="sidebar-link">阿里云CentOS开始安装Nignx</a></li><li class="sidebar-sub-header"><a href="/backend/centos.html#window如何安装nginx" class="sidebar-link">Window如何安装Nginx</a></li></ul></li><li><a href="/backend/centos.html#http及https的有关配置" class="sidebar-link">Http及Https的有关配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/backend/centos.html#nginx配置301重定向" class="sidebar-link">Nginx配置301重定向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/centos.html#http-重定向到-https" class="sidebar-link">http 重定向到 https</a></li><li class="sidebar-sub-header"><a href="/backend/centos.html#主域名重定向到-www-域名" class="sidebar-link">主域名重定向到 www 域名</a></li><li class="sidebar-sub-header"><a href="/backend/centos.html#将-主域名或-http-域名-都重定向到-https-的-www-域名" class="sidebar-link">将&quot;主域名或 http 域名&quot;都重定向到 https 的 www 域名</a></li></ul></li><li><a href="/backend/centos.html#nginx配置gzip压缩" class="sidebar-link">Nginx配置gzip压缩</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/backend/centos.html#nginx封禁ip或ip段" class="sidebar-link">nginx封禁IP或IP段</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/backend/centos.html#开启ocspstapling优化https访问性能" class="sidebar-link">开启OCSPStapling优化https访问性能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/centos.html#检查证书是否已开启-ocsp-stapling" class="sidebar-link">检查证书是否已开启 OCSP Stapling</a></li><li class="sidebar-sub-header"><a href="/backend/centos.html#开启-nginx-的-ocsp-stapling-配置" class="sidebar-link">开启 nginx 的 OCSP Stapling 配置</a></li></ul></li><li><a href="/backend/centos.html#负载均衡" class="sidebar-link">负载均衡</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/backend/centos.html#修改阿里云组策略" class="sidebar-link">修改阿里云组策略</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="阿里云-云服务器-ecs-centos7-0安装nginx教程"><a href="#阿里云-云服务器-ecs-centos7-0安装nginx教程" class="header-anchor">#</a> 阿里云 云服务器 ECS CentOS7.0安装Nginx教程</h1> <p><a href="http://nginx.org/" target="_blank" rel="noopener noreferrer">Nginx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个高性能的HTTP和反向代理服务，许多的大型网站都会采用Nginx来进行HTTP服务器托管，当然我们这里也要采用Nginx，在安装Nginx之前，需要安装一些前置模块</p> <h2 id="准备环境及安装"><a href="#准备环境及安装" class="header-anchor">#</a> 准备环境及安装</h2> <div class="custom-block tip"><p class="custom-block-title">关于Linux拓展补充</p> <p>/opt：是用户级的程序目录，可以理解为D:/Software。安装到/opt目录下的程序，它所有的数据、库文件等等都是放在同个目录下面。opt有可选的意思，这里可以用于放置第三方大型软件（或游戏），当你不需要时，直接rm -rf掉即可。在硬盘容量不够时，也可将/opt单独挂载到其他磁盘上使用。 <br>
/usr：系统级的目录，可以理解为C:/Windows/。<br>
/usr/lib：理解为C:/Windows/System32。<br>
/usr/local：用户级的程序目录，可以理解为C:/Progrem Files/。用户自己编译的软件默认会安装到这个目录下。<br>
这里主要存放那些手动安装的软件，即不是通过“新立得”或apt-get安装的软件。它和/usr目录具有相类似的目录结构。让软件包管理器来管理/usr目录，而把自定义的脚本(scripts)放到/usr/local目录下面。<br></p></div> <h3 id="阿里云centos安装nginx所需环境"><a href="#阿里云centos安装nginx所需环境" class="header-anchor">#</a> 阿里云CentOS安装Nginx所需环境</h3> <h5 id="安装编译环境gcc-g"><a href="#安装编译环境gcc-g" class="header-anchor">#</a> 安装编译环境gcc g++</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入到root目录</span>
<span class="token builtin class-name">cd</span> /root/
yum -y <span class="token function">install</span> <span class="token function">make</span> zlib zlib-devel gcc-c++ libtool  openssl openssl-devel
</code></pre></div><h5 id="安装pcre-pcre功能是让nginx有rewrite功能-下载pcre"><a href="#安装pcre-pcre功能是让nginx有rewrite功能-下载pcre" class="header-anchor">#</a> 安装PCRE: PCRE功能是让nginx有rewrite功能，下载PCRE</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">wget</span> http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz
</code></pre></div><h5 id="解压pcre安装包"><a href="#解压pcre安装包" class="header-anchor">#</a> 解压PCRE安装包</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">tar</span> zxvf pcre-8.35.tar.gz
</code></pre></div><h5 id="安装pcre"><a href="#安装pcre" class="header-anchor">#</a> 安装PCRE</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入安装包目录</span>
<span class="token builtin class-name">cd</span> pcre-8.35 

<span class="token comment"># 编译      </span>
./configure 

<span class="token comment"># 安装     </span>
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><br> <br> <h3 id="阿里云centos开始安装nignx"><a href="#阿里云centos开始安装nignx" class="header-anchor">#</a> 阿里云CentOS开始安装Nignx</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 回到root目录：</span>
<span class="token builtin class-name">cd</span> /root/

<span class="token comment"># 载nginx安装包</span>
<span class="token function">wget</span> http://nginx.org/download/nginx-1.16.0.tar.gz
</code></pre></div><h5 id="解压安装包"><a href="#解压安装包" class="header-anchor">#</a> 解压安装包</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">tar</span> zxvf nginx-1.16.0.tar.gz
</code></pre></div><blockquote><p>注意，这里要选好当前解压地址，解压完成就是Nginx所在的目录，这里我们在root根目录下解压。 进入安装目录：</p></blockquote> <h5 id="编译-安装"><a href="#编译-安装" class="header-anchor">#</a> 编译 安装</h5> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入nginx-1.16.0.tar.gz 解压后的文件 nginx-1.16.0</span>
<span class="token builtin class-name">cd</span> nginx-1.16.0

<span class="token comment"># 编译</span>
./configure  --prefix<span class="token operator">=</span>/usr/local/nginx/ --with-http_stub_status_module  --with-http_ssl_module

<span class="token comment"># 安装</span>
 <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><blockquote><p><code>编译时不写入 --prefix=/usr/local/nginx 则意味着Nginx会安装到/usr/local/nginx下面 |||| 你可以指定到安装到/root目录下./configure --prefix=/root/nginx</code></p></blockquote> <details class="custom-block details"><summary>已安装NGINX  首次安装编译Nginx时如果没有添加 --with-http_ssl_module  意味着不能使用https   如何不重新装NGINX操作如下</summary> <p><strong>环境：已安装NGINX</strong>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 进入到解压后的nginx安装文件下内</span>
<span class="token builtin class-name">cd</span>  /root/nginx-1.16.0

<span class="token comment"># 重新编译 </span>
./configure  --with-http_stub_status_module --with-http_ssl_module

<span class="token comment"># 安装  切记不要 make install 否则会导致覆盖之前的nginx</span>
<span class="token function">make</span>

<span class="token comment">#备份</span>
<span class="token function">cp</span> /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak

<span class="token comment"># 拷贝 (make完之后在objs目录下就多了个nginx，这个就是新版本的程序了)</span>
<span class="token function">cp</span> -r objs/nginx /usr/local/nginx/sbin/nginx

<span class="token comment"># 重启</span>
/usr/local/nginx/sbin/nginx -s reload
</code></pre></div></details> <h5 id="启动和停止nginx"><a href="#启动和停止nginx" class="header-anchor">#</a> 启动和停止Nginx</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s stop

<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>nginx<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>s reload
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">首次开启Nginx 报错 /usr/local/Nginx/logs/Nginx.pid&quot; failed(2:No such file or directory)</p> <p><strong>/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</strong> <br> <code>使用nginx -c的参数指定nginx.conf文件的位置</code></p></div> <div class="custom-block warning"><p class="custom-block-title">如果在修改Nginx参数后 运行时报错 (Found a swap file by the name &quot;.nginx.conf.swp&quot;)</p> <blockquote><p>那就是因为上次vim的时候，没有完全退出中途产生中断了。解决问题的方式很简单，就是把这个后缀swp的文件删掉就可以了**** <br></p></blockquote> <p><code>cd /usr/local/nginx/sbin/nginx</code></p> <p>命令显示出所有文件  (因为 .swp 暂存文件是隐藏文件) <br> <code>ls -a</code></p> <p>执行删除<br> <code>rm -f .nginx.conf.swp</code></p> <p>然后重启服务<br> <code>/usr/local/nginx/sbin/nginx -s reload</code></p></div> <div class="custom-block tip"><p class="custom-block-title">常用Nginx指令</p> <p><code>重新载入配置文件</code>              /usr/local/nginx/sbin/nginx -s reload   <br> <code>重启 Nginx</code>                 /usr/local/nginx/sbin/nginx -s reopen   <br> <code>停止 Nginx</code>                 /usr/local/nginx/sbin/nginx -s stop    <br> <code>查看ngixn版本极其编译参数</code>   /usr/local/nginx/sbin/nginx -V   <br> <code>检查配置文件nginx.conf的正确性命令</code> /usr/local/nginx/sbin/nginx -t</p></div> <br> <br> <h3 id="window如何安装nginx"><a href="#window如何安装nginx" class="header-anchor">#</a> Window如何安装Nginx</h3> <ul><li>到<code>nginx</code>官网下载<code>window</code>版压缩包（作者使用的是<code>nginx-1.14.2</code>）</li></ul> <blockquote><p>http://nginx.org/en/download.html</p></blockquote> <ul><li><p>在任意位置解压<code>nginx</code>压缩包</p></li> <li><p>进入<code>nginx</code>根目录，并在<code>html</code>目录下新建一个文件夹<code>admin</code>文件夹</p></li> <li><p>回到<code>nginx</code>根目录，并进入到<code>conf</code>目录下，找到<code>nginx.conf</code>并打开</p></li> <li><p>找到<code>http</code>域并另起一行，加入如下代码：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>sever <span class="token punctuation">{</span>
  listen <span class="token number">80</span><span class="token punctuation">;</span>
  server_name xxx<span class="token punctuation">.</span>com<span class="token punctuation">;</span>#<span class="token punctuation">(</span>您的域名<span class="token punctuation">)</span>
  location <span class="token operator">/</span> <span class="token punctuation">{</span>
    root html<span class="token operator">/</span>admin<span class="token punctuation">;</span>
		try_files $uri $uri<span class="token operator">/</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
		index index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>回到<code>nginx</code>根目录，双击<code>nginx.exe</code>运行<code>nginx</code></li></ul> <br> <br> <h2 id="http及https的有关配置"><a href="#http及https的有关配置" class="header-anchor">#</a> Http及Https的有关配置</h2> <h4 id="访问本机文件夹的nginx的配置"><a href="#访问本机文件夹的nginx的配置" class="header-anchor">#</a> 访问本机文件夹的Nginx的配置</h4> <p>通过Nginx配置实现根据不同的客户端访问不同的文件比如H5和PC 并且支持vue静态页面的<code>history路由模式</code></p> <blockquote><p>通过自定义变量实现访问不同的文件夹资源 <code>$terminaltype</code>  &amp;  <code>root $terminaltype</code> <br>
通过配置 <code>try_files</code>  可以实现vue静态文件支持history路由模式访问</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 访问文件的配置</span>
server <span class="token punctuation">{</span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>
        server_name  www.xmanv.com<span class="token punctuation">;</span>
        <span class="token builtin class-name">set</span> <span class="token variable">$terminaltype</span> html/web-client/pc<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$http_user_agent</span> ~ <span class="token punctuation">(</span>Android<span class="token operator">|</span>iPhone<span class="token operator">|</span>iPod<span class="token operator">|</span>BlackBerry<span class="token operator">|</span>WindowsPhone<span class="token operator">|</span>UC<span class="token operator">|</span>Kindle<span class="token operator">|</span>Mobile<span class="token operator">|</span>webOS<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin class-name">set</span> <span class="token variable">$terminaltype</span> html/web-client/wap<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        location / <span class="token punctuation">{</span>
            add_header Access-Control-Allow-Origin  *<span class="token punctuation">;</span>
            add_header Access-Control-Allow-Credentials  <span class="token boolean">true</span><span class="token punctuation">;</span>
            add_header Access-Control-Allow-Methods  *<span class="token punctuation">;</span>
            root <span class="token variable">$terminaltype</span><span class="token punctuation">;</span>
            index index.html index.htm index.php<span class="token punctuation">;</span>
            try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>try_files</code>按配置顺序检查文件是否存在，返回第一个找到的文件。结尾的斜线表示为文件夹 -$uri/。如果所有的文件都找不到，会进行一个内部重定向到最后一个参数。</p></div> <h4 id="代理本机其他接口的配置"><a href="#代理本机其他接口的配置" class="header-anchor">#</a> 代理本机其他接口的配置</h4> <blockquote><p>通过配置  <code>proxy_pass</code>  实现接口的反向代理</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 代理本机其他接口的配置</span>
    server <span class="token punctuation">{</span>
        listen       <span class="token number">80</span><span class="token punctuation">;</span>
        server_name  api.xmanv.com<span class="token punctuation">;</span>
        location ~ /^<span class="token punctuation">[</span>H,h<span class="token punctuation">]</span><span class="token punctuation">[</span>T,t<span class="token punctuation">]</span><span class="token punctuation">[</span>T,t<span class="token punctuation">]</span><span class="token punctuation">[</span>P,p<span class="token punctuation">]</span><span class="token punctuation">[</span>S,s<span class="token punctuation">]</span>/ <span class="token punctuation">{</span>
            proxy_pass http://127.0.0.1:5614<span class="token punctuation">;</span>
            proxy_set_header Host                           <span class="token variable">$http_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Real-IP                      <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Forwarded-For                <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
            index index.html index.htm<span class="token punctuation">;</span>                     <span class="token comment">#默认情况</span>
        <span class="token punctuation">}</span>
        location / <span class="token punctuation">{</span>
            proxy_pass http://127.0.0.1:5614<span class="token punctuation">;</span>
            proxy_set_header Host                           <span class="token variable">$http_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Real-IP                      <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
            proxy_set_header X-Forwarded-For                <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
            index index.html index.htm<span class="token punctuation">;</span>                     <span class="token comment">#默认情况</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="配置https支持网站https访问-同时强制用户访问http是跳到https"><a href="#配置https支持网站https访问-同时强制用户访问http是跳到https" class="header-anchor">#</a> 配置Https支持网站https访问 同时强制用户访问http是跳到https</h4> <blockquote><p>通过配置  <code>rewrite ^(.*) https://$server_name$1 permanent;</code>  实现重定向 <a href="https://www.cnblogs.com/redfire/p/7695627.html" target="_blank" rel="noopener noreferrer">其他方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 代理本机其他接口的配置</span>
server <span class="token punctuation">{</span>
    listen      <span class="token number">443</span> ssl<span class="token punctuation">;</span>
    server_name  www.xmanv.com<span class="token punctuation">;</span>
    <span class="token builtin class-name">set</span> <span class="token variable">$terminaltype</span> html/web-client/pc<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$http_user_agent</span> ~ <span class="token punctuation">(</span>Android<span class="token operator">|</span>iPhone<span class="token operator">|</span>iPod<span class="token operator">|</span>BlackBerry<span class="token operator">|</span>WindowsPhone<span class="token operator">|</span>UC<span class="token operator">|</span>Kindle<span class="token operator">|</span>Mobile<span class="token operator">|</span>webOS<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin class-name">set</span> <span class="token variable">$terminaltype</span> html/web-client/wap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    add_header Access-Control-Allow-Credentials  <span class="token boolean">true</span><span class="token punctuation">;</span>
    add_header Access-Control-Allow-Methods  *<span class="token punctuation">;</span>
    root <span class="token variable">$terminaltype</span><span class="token punctuation">;</span>
    index index.html index.htm index.php<span class="token punctuation">;</span>
    try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ssl_certificate      /root/.acme.sh/xmanv.com/fullchain.cer<span class="token punctuation">;</span> <span class="token comment">#证书地址</span>
    ssl_certificate_key  /root/.acme.sh/xmanv.com/xmanv.com.key<span class="token punctuation">;</span> <span class="token comment">#秘钥地址</span>
    ssl_session_cache    shared:SSL:1m<span class="token punctuation">;</span> 
    ssl_stapling_verify on<span class="token punctuation">;</span>
    resolver <span class="token number">8.8</span>.8.8 <span class="token number">8.8</span>.4.4 <span class="token assign-left variable">valid</span><span class="token operator">=</span>60s <span class="token assign-left variable">ipv6</span><span class="token operator">=</span>off<span class="token punctuation">;</span>
    resolver_timeout 5s<span class="token punctuation">;</span>
    error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
    location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root   html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
server <span class="token punctuation">{</span>
    server_name  www.xmanv.com<span class="token punctuation">;</span>
    rewrite ^<span class="token punctuation">(</span>.*<span class="token punctuation">)</span> https://<span class="token variable">$server_name</span><span class="token variable">$1</span> permanent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><a href="/backend/https.html#安装acme-sh脚本">免费Https证书获取教程</a></p></div> <h2 id="nginx配置301重定向"><a href="#nginx配置301重定向" class="header-anchor">#</a> Nginx配置301重定向</h2> <blockquote><p>本文讲解 nginx 如何配置重定向跳转。重定向分为 301 永久重定向和 302 临时重定向，本文主要讲解 301 永久重定向。<br>
网站在实际运营中，很可能会有重定向的需求, 如非 www 域名自动重定向为 www 域名, http 地址自动重定向为 https 地址等。<br>
当网站的域名做变更时，通过 301 重定向还可以将旧域名的分数排名转移到新域名。<br></p></blockquote> <h3 id="http-重定向到-https"><a href="#http-重定向到-https" class="header-anchor">#</a> http 重定向到 https</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 将&quot;http的www域名&quot;重定向到&quot;https的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://www.sofineday.com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 配置https的www域名</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#https端口</span>
    listen       <span class="token number">443</span> ssl<span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token comment">#https的证书配置</span>
    ssl_certificate    /etc/nginx/cert/_.sofineday.com.full_chain.pem<span class="token punctuation">;</span>
    ssl_certificate_key    /etc/nginx/cert/_.sofineday.com.private.key<span class="token punctuation">;</span>

    root /static-file/blog<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="主域名重定向到-www-域名"><a href="#主域名重定向到-www-域名" class="header-anchor">#</a> 主域名重定向到 www 域名</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 将&quot;http的主域名&quot;重定向到&quot;http的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>

    server_name  sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token builtin class-name">return</span> <span class="token number">301</span> http://www.sofineday.com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 将&quot;http的www域名&quot;重定向到&quot;https的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    root /static-file/blog<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="将-主域名或-http-域名-都重定向到-https-的-www-域名"><a href="#将-主域名或-http-域名-都重定向到-https-的-www-域名" class="header-anchor">#</a> 将&quot;主域名或 http 域名&quot;都重定向到 https 的 www 域名</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>推荐该方案，终极方案，考虑得最完善！ 做 seo 优化时，需要考虑该方案，详见seo 重定向</p></div> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 将&quot;http或https的主域名&quot;重定向到&quot;https的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token comment">#https端口</span>
    listen       <span class="token number">443</span> ssl<span class="token punctuation">;</span>

    server_name  sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token comment">#https的证书配置</span>
    ssl_certificate    /etc/nginx/cert/_.sofineday.com.full_chain.pem<span class="token punctuation">;</span>
    ssl_certificate_key    /etc/nginx/cert/_.sofineday.com.private.key<span class="token punctuation">;</span>

    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://www.sofineday.com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 将&quot;http的www域名&quot;重定向到&quot;https的www域名&quot;</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#http端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token builtin class-name">return</span> <span class="token number">301</span> https://www.sofineday.com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 配置https的www域名</span>
server <span class="token punctuation">{</span>
    <span class="token comment">#https端口</span>
    listen       <span class="token number">443</span> ssl<span class="token punctuation">;</span>

    server_name  www.sofineday.com<span class="token punctuation">;</span>

    access_log /var/log/nginx/www.sofineday.com.access_log<span class="token punctuation">;</span>
    error_log /var/log/nginx/www.sofineday.com.error_log<span class="token punctuation">;</span>

    <span class="token comment">#https的证书配置</span>
    ssl_certificate    /etc/nginx/cert/_.sofineday.com.full_chain.pem<span class="token punctuation">;</span>
    ssl_certificate_key    /etc/nginx/cert/_.sofineday.com.private.key<span class="token punctuation">;</span>


    root /static-file/blog<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <br> <h2 id="nginx配置gzip压缩"><a href="#nginx配置gzip压缩" class="header-anchor">#</a> Nginx配置gzip压缩</h2> <br> <blockquote><p>本文讲述 nginx 支持 gzip 压缩的配置方法。大文件的访问不仅会浪费服务端的带宽流量，也会浪费用户端的带宽流量，并且还会影响传输速度，从而影响用户体验。<br>
所以对于大文件，应该采用 gzip 压缩，减少文件传输大小、减少带宽占用、提高文件加载速度、提升用户体验。</p></blockquote> <ul><li>打开<code>nginx.conf</code>，并在<code>http</code>模块任意行加入如下代码： 在 <code>http</code>,<code>server</code> 或 <code>location</code> 任意模块都可以配置 <code>gzip</code> 压缩。</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">gzip</span>  on<span class="token punctuation">;</span>
<span class="token comment">#gizp压缩起点，文件大于1k才进行压缩</span>
gzip_min_length 1k<span class="token punctuation">;</span>
<span class="token comment"># gzip 压缩级别，1-9，数字越大压缩的越好，也越占用CPU时间</span>
gzip_comp_level <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token comment"># 进行压缩的文件类型, 按需补充即可</span>
gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript<span class="token punctuation">;</span>
<span class="token comment"># 是否在http header中添加Vary: Accept-Encoding，建议开启</span>
gzip_vary on<span class="token punctuation">;</span>

</code></pre></div><ul><li>保存并重启<code>nginx</code></li></ul> <p><code>window</code>与<code>linux</code>的配置方式完全一致，只需要找到<code>nginx.conf</code>配置文件进行如上操作即可</p> <h2 id="nginx封禁ip或ip段"><a href="#nginx封禁ip或ip段" class="header-anchor">#</a> nginx封禁IP或IP段</h2> <blockquote><p>本文讲述 nginx 封禁 IP 或 IP 段的配置方法。若发现我们的网站被某个 IP 频繁非正常访问或被某个 IP 段频繁访问, 那么很可能是爬虫的 IP，我们需要根据实际分析来决定是否要封禁这些 IP，这样这些 IP 就无法访问我们的网站进而无法爬取我们的资源。</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>使用 deny 指令封禁 IP, 可以在如下区域配置:<br>
http、server 或 location</p></div> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">#封禁单个 IP</span>
deny <span class="token number">123.45</span>.6.7

<span class="token comment">#封整个段即从 123.0.0.1 到 123.255.255.254</span>
deny <span class="token number">123.0</span>.0.0/8

<span class="token comment">#封 IP 段即从 123.45.0.1 到 123.45.255.254 的命令</span>
deny <span class="token number">124.45</span>.0.0/16

<span class="token comment">#封 IP 段即从 123.45.6.1 到 123.45.6.254</span>
deny <span class="token number">123.45</span>.6.0/24
</code></pre></div><br> <br> <h2 id="开启ocspstapling优化https访问性能"><a href="#开启ocspstapling优化https访问性能" class="header-anchor">#</a> 开启OCSPStapling优化https访问性能</h2> <blockquote><p>本文讲述 nginx 开启 OCSP Stapling 的配置方法, 从而优化 https 的访问性能。因为免费证书的证书校验服务器可能没有国内节点，导致国内用户通过 https 访问站点可能会明显比 http 慢。nginx 开启 OCSP Stapling 即可解决该问题。</p></blockquote> <div class="custom-block warning"><p class="custom-block-title">https 站点访问慢的原因分析</p> <p>因为浏览器访问 https 站点时，至少首次访问会去证书校验服务器检验 https 证书, 但是免费证书的校验服务器一般都在国外，导致国内用户访问的时候，会明显感到慢，甚至经常出现网络错误。</p> <p>不同的客户端设备的 https 证书校验机制又不尽相同。例如 android 设备会在首次访问 https 站点时，把证书缓存在本地，后续访问就不会去访问校验服务，导致 android 上访问很流畅，但是 ios 设备却体验特别差，甚至压根没法用。</p> <p>为了解决免费 https 证书访问慢的问题，有个解决方案：<code>OCSP Stapling</code>。</p></div> <h3 id="检查证书是否已开启-ocsp-stapling"><a href="#检查证书是否已开启-ocsp-stapling" class="header-anchor">#</a> 检查证书是否已开启 OCSP Stapling</h3> <ul><li>检查证书是否已开启 OCSP Stapling</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>openssl s_client -connect sofineday.com:443 -servername sofineday.com -status -tlsextdebug <span class="token operator">&lt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;OCSP&quot;</span>
</code></pre></div><ul><li>若显示如下结果，则表示已开启</li></ul> <div class="language- extra-class"><pre class="language-text"><code>OCSP response:
OCSP Response Data:
    OCSP Response Status: successful (0x0)
    Response Type: Basic OCSP Response

</code></pre></div><ul><li>若显示如下结果，则表示未开启</li></ul> <div class="language- extra-class"><pre class="language-text"><code>OCSP response: no response sent
</code></pre></div><ul><li>前往 <a href="https://myssl.com/" target="_blank" rel="noopener noreferrer">myssl.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 网站 查看</li></ul> <p><img src="/assets/img/1.5ea43d8d.png" alt="开启后台启动"></p> <ul><li><p>若没有开启 ocsp, 显示如下 <br> <img src="/assets/img/2.57722a63.png" alt="开启后台启动"></p></li> <li><p>若已开启 ocsp，显示如下 <br> <img src="/assets/img/2.57722a63.png" alt="开启后台启动"></p></li></ul> <h3 id="开启-nginx-的-ocsp-stapling-配置"><a href="#开启-nginx-的-ocsp-stapling-配置" class="header-anchor">#</a> 开启 nginx 的 OCSP Stapling 配置</h3> <div class="custom-block tip"><p class="custom-block-title">此处只给了 Let's Encrypt 证书的 oscp 配置</p> <p>若您使用的是其它品牌的证书，配置方法不同，请自行查找教程。</p></div> <blockquote><p>在原有的 https 配置基础之上，加入如下 4 行配置即可</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code>ssl_stapling on<span class="token punctuation">;</span>
ssl_stapling_verify on<span class="token punctuation">;</span>
resolver <span class="token number">8.8</span>.8.8 <span class="token number">8.8</span>.4.4 <span class="token assign-left variable">valid</span><span class="token operator">=</span>60s <span class="token assign-left variable">ipv6</span><span class="token operator">=</span>off<span class="token punctuation">;</span>
resolver_timeout 5s<span class="token punctuation">;</span>
</code></pre></div><h2 id="负载均衡"><a href="#负载均衡" class="header-anchor">#</a> 负载均衡</h2> <blockquote><p>有效处理服务器高并发，同时也适用于平滑部署</p></blockquote> <ul><li>打开<code>nginx.conf</code>，并在<code>http</code>模块任意行加入如下代码：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>upstream xuanzai {
	server xxx.com weight=10; # 服务器1
	server xxx.com weight=10; # 服务器2
}
</code></pre></div><ul><li>配置<code>server</code>模块</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>server<span class="token punctuation">{</span>
	listen <span class="token number">80</span><span class="token punctuation">;</span>
	server_name xzadmin<span class="token punctuation">.</span>xuanzai<span class="token punctuation">.</span>top<span class="token punctuation">;</span> # 暴露给用户访问的域名
	location <span class="token operator">/</span> <span class="token punctuation">{</span>
		proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>xuanzai<span class="token punctuation">;</span> # 名称与负载均衡配置的名称一致
		proxy_redirect <span class="token keyword">default</span><span class="token punctuation">;</span>
		index index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>	
		root html<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>	
<span class="token punctuation">}</span>
</code></pre></div><ul><li>保存并重启<code>nginx</code></li></ul> <p>这样，简单的负载均衡就配置完成了！<br>
此时如果两个（或多个）服务器已开启，那么可尝试访问已配置好的域名，查看是否配置成功<br> <code>window</code>与<code>linux</code>的配置方式完全一致，只需要找到<code>nginx.conf</code>配置文件进行如上操作即可</p> <br> <h2 id="修改阿里云组策略"><a href="#修改阿里云组策略" class="header-anchor">#</a> 修改阿里云组策略</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>注意，在开启nginx的http和https服务后，需要在阿里云的云服务器实例安全组策略中添加80端口和443端口的开启。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果要使用其他端口都需要在安全组里进行配置(一个阿里云账号下的多台esc服务器 都是配在同一个地方)</p></div> <p><strong>找到实例中的安全组配置：</strong> <br> <img src="/assets/img/step1.93e6df80.jpg" alt="vuepress首页效果"></p> <p><strong>进入之后，点击添加安全组配置：</strong> <br> <img src="/assets/img/step2.b506cd4c.jpg" alt="vuepress首页效果"></p> <p><strong>添加http的80端口：</strong> <br> <img src="/assets/img/step3.176fefcc.jpg" alt="vuepress首页效果"></p> <p><strong>添加https的443端口：</strong> <br> <img src="/assets/img/step4.991b62ea.jpg" alt="vuepress首页效果"></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><APlayer audio="" fixed="true" autoplay="autoplay" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/assets/js/app.d98f75d3.js" defer></script><script src="/assets/js/7.9b6d0533.js" defer></script><script src="/assets/js/16.003392c7.js" defer></script>
  </body>
</html>
