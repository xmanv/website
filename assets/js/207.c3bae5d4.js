(window.webpackJsonp=window.webpackJsonp||[]).push([[207],{675:function(t,s,n){"use strict";n.r(s);var a=n(1),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),n("h2",{attrs:{id:"什么是docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是docker"}},[t._v("#")]),t._v(" 什么是docker")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("特性")]),t._v(" "),n("th",[t._v("容器")]),t._v(" "),n("th",[t._v("虚拟机")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("启动")]),t._v(" "),n("td",[t._v("秒级")]),t._v(" "),n("td",[t._v("分钟级")])]),t._v(" "),n("tr",[n("td",[t._v("硬盘使用")]),t._v(" "),n("td",[t._v("一般为 MB")]),t._v(" "),n("td",[t._v("一般为 GB")])]),t._v(" "),n("tr",[n("td",[t._v("性能")]),t._v(" "),n("td",[t._v("接近原生")]),t._v(" "),n("td",[t._v("弱于")])]),t._v(" "),n("tr",[n("td",[t._v("系统支持量")]),t._v(" "),n("td",[t._v("单机支持上千个容器")]),t._v(" "),n("td",[t._v("一般几十个")])])])]),t._v(" "),n("h2",{attrs:{id:"安装docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[t._v("#")]),t._v(" 安装docker")]),t._v(" "),n("p",[t._v("我自己用的是Docker for Mac")]),t._v(" "),n("p",[t._v("其它系统可以参考 http://docker_practice.gitee.io/install/")]),t._v(" "),n("h2",{attrs:{id:"基本概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),n("ul",[n("li",[t._v("镜像（Image）")])]),t._v(" "),n("p",[t._v("Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。")]),t._v(" "),n("ul",[n("li",[t._v("容器（Container）")])]),t._v(" "),n("p",[t._v("镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的 类 和 实例 一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。")]),t._v(" "),n("ul",[n("li",[t._v("仓库（Repository）")])]),t._v(" "),n("p",[t._v("镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。")]),t._v(" "),n("p",[t._v("一个 Docker Registry 中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；每个标签对应一个镜像。")]),t._v(" "),n("p",[t._v("通常，一个仓库会包含同一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本。我们可以通过 <仓库名>:<标签> 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 latest 作为默认标签。")]),t._v(" "),n("h3",{attrs:{id:"镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#镜像"}},[t._v("#")]),t._v(" 镜像")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取镜像")]),t._v("\ndocker pull ubuntu:16.04\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以这个镜像为基础启动并运行一个容器")]),t._v("\ndocker run -it --rm "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    ubuntu:16.04 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n-it：这是两个参数，一个是 -i：交互式操作，一个是 -t 终端。我们这里打算进入 "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" 执行一些命令并查看返回结果，因此我们需要交互式终端。\n--rm：这个参数是说容器退出后随之将其删除。默认情况下，为了排障需求，退出的容器并不会立即删除，除非手动 docker rm。我们这里只是随便执行个命令，看看结果，不需要排障和保留结果，因此使用 --rm 可以避免浪费空间。\nubuntu:16.04：这是指用 ubuntu:16.04 镜像为基础来启动容器。\nbash：放在镜像名后的是命令，这里我们希望有个交互式 Shell，因此用的是 bash。\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出镜像")]),t._v("\ndocker image "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\ndocker images\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 镜像占用")]),t._v("\ndocker system "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 清楚悬挂镜像")]),t._v("\ndocker image prune\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除镜像")]),t._v("\ndocker image "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v("\ndocker rmi\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 批量删除")]),t._v("\ndocker image "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("docker image "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -q redis"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\ndocker image "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("docker image "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -q -f "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("before")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mongo:3.2"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n\n")])])]),n("h3",{attrs:{id:"容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#容器"}},[t._v("#")]),t._v(" 容器")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动并创建容器")]),t._v("\ndocker run ubuntu\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入容器，交互模式")]),t._v("\ndocker run -t -i ubuntu "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行后就可以通过ID exec进入")]),t._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it dcc12b7c45c5 "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 守护状态运行")]),t._v("\ndocker run -d ubuntu /bin/sh -c "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"while true; do echo hello world; sleep 1; done"')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看容器")]),t._v("\ndocker container "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看容器日志")]),t._v("\ndocker container logs xxx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 终止容器")]),t._v("\ndocker container stop xxx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动容器")]),t._v("\ndocker container start xxx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启容器")]),t._v("\ndocker container restart\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入容器")]),t._v("\ndocker attach\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行命令")]),t._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it ID "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导出容器")]),t._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导入容器")]),t._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除容器")]),t._v("\ndocker container "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v("\ndocker "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 清除所有容器")]),t._v("\ndocker container prune\n\n")])])]),n("h3",{attrs:{id:"数据卷"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据卷"}},[t._v("#")]),t._v(" 数据卷")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建数据卷")]),t._v("\ndocker volume create\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出数据卷")]),t._v("\ndocker volume "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除数据卷")]),t._v("\ndocker volume "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 清除没用的数据卷")]),t._v("\ndocker volume prune\n\n")])])]),n("h3",{attrs:{id:"挂载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#挂载"}},[t._v("#")]),t._v(" 挂载")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("--mount\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 栗子")]),t._v("\ndocker run -d -P "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --name web "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -v /src/webapp:/opt/webapp \\")]),t._v("\n    --mount "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bind,source"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/src/webapp,target"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/webapp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    training/webapp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    python app.py\n\n加载主机的 /src/webapp 目录到容器的 /opt/webapp目录\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看数据卷")]),t._v("\ndocker volume inspect\n\n")])])]),n("h2",{attrs:{id:"dockerfile定制镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile定制镜像"}},[t._v("#")]),t._v(" Dockerfile定制镜像")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# FROM 指定基础镜像")]),t._v("\nFROM 镜像\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# RUN 执行")]),t._v("\nRUN "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("命令"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nor\nRUN "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"可执行文件"')]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"参数1"')]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"参数2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nRUN "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker!</h1>'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /usr/share/nginx/html/index.html\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# COPY 复制文件")]),t._v("\nCOPY "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("源路径"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("目标路径"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ADD 复制文件或目录，如果是tgz，会被解压缩")]),t._v("\nADD "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("源路径"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("目标路径"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CMD 容器启动")]),t._v("\nCMD "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" CMD "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sh"')]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-c"')]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo '),n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOME")]),t._v('"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ENTRYPOINT 入口点")]),t._v("\nENTRYPOINT "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"docker-entrypoint.sh"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n存在 ENTRYPOINT 后，CMD 的内容将会作为参数传给 ENTRYPOINT\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ENV 环境变量")]),t._v("\nENV "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ARG 与ENV差不多")]),t._v("\nARG 所设置的构建环境的环境变量，在将来容器运行时是不会存在这些环境变量的\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# VOLUME 匿名卷")]),t._v("\nVOLUME "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<路径1>"')]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<路径2>"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# EXPOSE 暴露端口")]),t._v("\nEXPOSE "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("端口"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("端口"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WOEKDIR 指定工作目录")]),t._v("\nWORKDIR "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("工作目录路径"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# USER 指定当前用户")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("USER")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("用户名"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n")])])]),n("h2",{attrs:{id:"docker-compose"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[t._v("#")]),t._v(" docker-compose")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("服务 (service)：一个应用的容器，实际上可以包括若干运行相同镜像的容器实例。")])]),t._v(" "),n("li",[n("p",[t._v("项目 (project)：由一组关联的应用容器组成的一个完整业务单元，在 docker-compose.yml 文件中定义。")])])]),t._v(" "),n("h2",{attrs:{id:"实践"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实践"}},[t._v("#")]),t._v(" 实践")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/OMGZui/docker-php",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker-php"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("docker-compose.yml")]),t._v(" "),n("div",{staticClass:"language-yml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("frontend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NETWORKS_DRIVER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("backend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NETWORKS_DRIVER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mysql")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VOLUMES_DRIVER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VOLUMES_DRIVER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mongo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VOLUMES_DRIVER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### Workspace Utilities ##################################")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("workspace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./workspace\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" LARADOCK_PHP_VERSION=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_VERSION"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_MONGO=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_INSTALL_MONGO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_PHPREDIS=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_INSTALL_PHPREDIS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_NODE=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_INSTALL_NODE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" NPM_REGISTRY=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_NPM_REGISTRY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" COMPOSER_GLOBAL_INSTALL=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_COMPOSER_GLOBAL_INSTALL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" COMPOSER_REPO_PACKAGIST=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_COMPOSER_REPO_PACKAGIST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_SWOOLE=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_INSTALL_SWOOLE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" PUID=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_PUID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" PGID=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_PGID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" TZ=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_TIMEZONE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("APP_CODE_PATH_HOST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("APP_CODE_PATH_CONTAINER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${WORKSPACE_SSH_PORT}:22"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" PHP_IDE_CONFIG=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_IDE_CONFIG"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" frontend\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" backend\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### PHP-FPM ##############################################")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("php-fpm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fpm\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" LARADOCK_PHP_VERSION=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_VERSION"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_MONGO=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_FPM_INSTALL_MONGO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_PHPREDIS=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_FPM_INSTALL_PHPREDIS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_OPCACHE=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_FPM_INSTALL_OPCACHE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_SWOOLE=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_FPM_INSTALL_SWOOLE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_IMAGE_OPTIMIZERS=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_FPM_INSTALL_IMAGE_OPTIMIZERS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INSTALL_IMAGEMAGICK=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_FPM_INSTALL_IMAGEMAGICK"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fpm/php$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_VERSION"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(".ini"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/usr/local/etc/php/php.ini\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("APP_CODE_PATH_HOST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("APP_CODE_PATH_CONTAINER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expose")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9000"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" PHP_IDE_CONFIG=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PHP_IDE_CONFIG"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" workspace\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" backend\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### NGINX Server #########################################")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nginx")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./nginx\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" PHP_UPSTREAM_CONTAINER=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NGINX_PHP_UPSTREAM_CONTAINER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" PHP_UPSTREAM_PORT=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NGINX_PHP_UPSTREAM_PORT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CHANGE_SOURCE=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CHANGE_SOURCE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("APP_CODE_PATH_HOST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("APP_CODE_PATH_CONTAINER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NGINX_HOST_LOG_PATH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/log/nginx\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NGINX_SITES_PATH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/nginx/sites"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("available\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NGINX_SSL_PATH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/nginx/ssl\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${NGINX_HOST_HTTP_PORT}:80"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${NGINX_HOST_HTTPS_PORT}:443"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fpm\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" frontend\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" backend\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### MySQL ################################################")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mysql")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./mysql\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" MYSQL_VERSION=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("MYSQL_VERSION"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" MYSQL_DATABASE=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("MYSQL_DATABASE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" MYSQL_USER=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("MYSQL_USER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" MYSQL_PASSWORD=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("MYSQL_PASSWORD"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" MYSQL_ROOT_PASSWORD=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("MYSQL_ROOT_PASSWORD"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" TZ=$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("WORKSPACE_TIMEZONE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DATA_PATH_HOST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/lib/mysql\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("MYSQL_ENTRYPOINT_INITDB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/docker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("entrypoint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("initdb.d\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${MYSQL_PORT}:3306"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" backend\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### MongoDB ##############################################")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mongo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./mongo\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${MONGODB_PORT}:27017"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DATA_PATH_HOST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/mongo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/data/db\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" backend\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### Redis ################################################")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./redis\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DATA_PATH_HOST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/data\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${REDIS_PORT}:6379"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" backend\n\n")])])]),n("p",[t._v(".env")]),t._v(" "),n("div",{staticClass:"language-.env extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("APP_CODE_PATH_HOST=/Users/shengj/mac/php\nAPP_CODE_PATH_CONTAINER=/var/www:cached\nDATA_PATH_HOST=~/.laradock/data\n\n### Drivers ################################################\nVOLUMES_DRIVER=local\nNETWORKS_DRIVER=bridge\n\n### Docker compose files ##################################\nCOMPOSE_FILE=docker-compose.yml\nCOMPOSE_PATH_SEPARATOR=:\nCOMPOSE_PROJECT_NAME=laradock\n\n### PHP Version ###########################################\nPHP_VERSION=7.2\n\n### PHP Interpreter #######################################\nPHP_INTERPRETER=php-fpm\n\n### Docker Host IP ########################################\nDOCKER_HOST_IP=10.0.75.1\n\n### Remote Interpreter ####################################\nPHP_IDE_CONFIG=serverName=laradock\n\n### Environment ###########################################\nCHANGE_SOURCE=true\n\n### WORKSPACE #############################################\nWORKSPACE_COMPOSER_GLOBAL_INSTALL=true\nWORKSPACE_COMPOSER_REPO_PACKAGIST=https://packagist.laravel-china.org\nWORKSPACE_INSTALL_NODE=true\nWORKSPACE_NODE_VERSION=node\nWORKSPACE_NPM_REGISTRY=https://registry.npm.taobao.org\nWORKSPACE_INSTALL_PHPREDIS=true\nWORKSPACE_INSTALL_MONGO=true\nWORKSPACE_INSTALL_SWOOLE=true\nWORKSPACE_PUID=1000\nWORKSPACE_PGID=1000\nWORKSPACE_TIMEZONE=PRC\nWORKSPACE_SSH_PORT=2222\n\n### PHP_FPM ###############################################\nPHP_FPM_INSTALL_ZIP_ARCHIVE=true\nPHP_FPM_INSTALL_BCMATH=true\nPHP_FPM_INSTALL_MYSQLI=true\nPHP_FPM_INSTALL_INTL=true\nPHP_FPM_INSTALL_IMAGEMAGICK=false\nPHP_FPM_INSTALL_OPCACHE=true\nPHP_FPM_INSTALL_IMAGE_OPTIMIZERS=false\nPHP_FPM_INSTALL_PHPREDIS=true\nPHP_FPM_INSTALL_MONGO=true\nPHP_FPM_INSTALL_SWOOLE=true\n\n### NGINX #################################################\nNGINX_HOST_HTTP_PORT=80\nNGINX_HOST_HTTPS_PORT=443\nNGINX_HOST_LOG_PATH=./logs/nginx/\nNGINX_SITES_PATH=./nginx/sites/\nNGINX_PHP_UPSTREAM_CONTAINER=php-fpm\nNGINX_PHP_UPSTREAM_PORT=9000\nNGINX_SSL_PATH=./nginx/ssl/\n\n### MYSQL #################################################\nMYSQL_VERSION=5.5\nMYSQL_DATABASE=default\nMYSQL_USER=default\nMYSQL_PASSWORD=secret\nMYSQL_PORT=3306\nMYSQL_ROOT_PASSWORD=root\nMYSQL_ENTRYPOINT_INITDB=./mysql/docker-entrypoint-initdb.d\n\n### REDIS #################################################\nREDIS_PORT=6379\n\n### MONGODB ###############################################\nMONGODB_PORT=27017\n")])])]),n("h2",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://docker_practice.gitee.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker — 从入门到实践"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/laradock/laradock",target:"_blank",rel:"noopener noreferrer"}},[t._v("laradock"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);