(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{738:function(t,a,r){"use strict";r.r(a);var i=r(1),n=Object(i.a)({},(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h1",{attrs:{id:"uniapp-app"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#uniapp-app"}},[t._v("#")]),t._v(" Uniapp APP")]),t._v(" "),i("h2",{attrs:{id:"hbuilderx安卓离线打包教程全一览"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#hbuilderx安卓离线打包教程全一览"}},[t._v("#")]),t._v(" HBuilderX安卓离线打包教程全一览")]),t._v(" "),i("p",[i("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android",target:"_blank",rel:"noopener noreferrer"}},[t._v("UniAPP官网打包教程  App离线打包"),i("OutboundLink")],1)]),t._v(" "),i("h2",{attrs:{id:"开发环境"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[t._v("#")]),t._v(" 开发环境")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("Android Studio 下载地址："),i("a",{attrs:{href:"https://developer.android.google.cn/studio/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Android Studio官网"),i("OutboundLink")],1),t._v(" OR "),i("a",{attrs:{href:"http://www.android-studio.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Android Studio中文社区"),i("OutboundLink")],1)])]),t._v(" "),i("li",[i("p",[t._v("HBuilderX "),i("a",{attrs:{href:"https://www.dcloud.io/hbuilderx.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("HBuilderX"),i("OutboundLink")],1),t._v(" "),i("code",[t._v("安装使用方法: 直接解压，然后直接HBuilderX.exe")])])]),t._v(" "),i("li",[i("p",[t._v("App离线SDK下载："),i("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/download/android",target:"_blank",rel:"noopener noreferrer"}},[t._v("最新android平台SDK下载"),i("OutboundLink")],1)])])]),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("HBuilderX是一款不错的前端编辑器，它为使用者提供了云打包和离线打包两种形式，但云打包有着次数限制（可付费解锁），并且服务器繁忙时需要排队等候，不利于开发者的正常调试。从另一方面来看，尽管官方对于隐私保护极为重视，但还是无法让使用者打消代码上传泄露的疑虑，所以离线打包作为第二条打包途径理当重视。"),i("br"),t._v("\nHBuilderX安卓离线打包基于自身的SDK和AndroidStudio软件，AndroidStudio对于初学者来说较难掌握，而官方文档也过于简洁，初期打包可能各种报错，我在社区里看到不少离线打包失败的网友，本着知识共享的原则将HBuilderX安卓离线打包步骤一一演示，希望能帮助到大家。"),i("br"),t._v("\n因为uni-app和5+app打包有着些许的不同，在AndroidStudio的某些操作上还是有要注意的地方，比如build.gradle的同步，不更改某些设置的话，很容易被防火墙拦住，最终导致同步失败。"),i("br"),t._v("\n我在上篇5+app打包教程图文的基础上对文章做出了一定更改，以便符合uni-app打包的需求。废话不多说，我们直接开始往下进行。"),i("br")])]),t._v(" "),i("h2",{attrs:{id:"androidstudio环境准备"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#androidstudio环境准备"}},[t._v("#")]),t._v(" AndroidStudio环境准备")]),t._v(" "),i("ul",[i("li",[t._v("首先要下载AndroidStudio软件，下面是官方网址："),i("a",{attrs:{href:"https://developer.android.google.cn/studio/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Link"),i("OutboundLink")],1),t._v(" "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(406),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("我们可以看到目前最新的版本是3.63，大家根据自己的电脑配置按照要求下载安装即可，如果想了解更多而自己的英文水平不是那么的好，可以私下里使用谷歌浏览器翻译了解。")])]),t._v(" "),i("blockquote",[i("p",[t._v("AndroidStudio下载安装完成后打开，如下图所示选中Empty Activity，点击Next创建。"),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(407),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("编辑应用名称、包名和保存位置，包名一般为com.***.*** 样式。我们注意到下方Minimum SDK有下拉列表框选项，这里简单解释一下，这份是用来选择API的，"),i("br"),t._v("注意到下面的蓝色标记“Your app will run on approximately 92.3% of device”了没，代表安卓用户中有92.3%的用户手机版本大于等于这个数，"),i("br"),t._v("也就是安卓5.1及以上版本的Android手机可以正常使用这个应用，而低于此版本的即使安装安装成功也会闪退黑屏等无法打开。 "),i("br")])]),t._v(" "),i("li",[i("p",[t._v("这就需要你做一个权衡，怎么才能让应用覆盖更多的用户，太低不利于发展，太高用户基数少，官方文档的建议是大于等于19，我这里选的是22，大家自行斟酌。"),i("br")])]),t._v(" "),i("li",[i("p",[t._v("点击Finish完成创建。"),i("br")])])]),t._v(" "),i("p",[i("img",{attrs:{src:r(408),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("看到下图的红色箭头了没，这个是创建模拟器的选项，在最初没有模拟器时如红色下划线状态，这在官方文档里最后运行描述时一笔带过，至于我为什么详细描述，在后面我会给大家解释 "),i("br")])]),t._v(" "),i("li",[i("p",[t._v("点击红色箭头选项。"),i("br")])])]),t._v(" "),i("p",[i("img",{attrs:{src:r(409),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("点击Create Virtual Device创建虚拟设备 "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(410),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("在Phone栏里随意选择各种配置的模拟设备，如果你的电脑配置并不是多么好，建议挑选简单的比较容易加载，在这里我挑选了一个320×480的。点击Next。 "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(411),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("系统镜像，自己选择。点击Next。 "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(412),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("这个默认就行，直接点击Finish。 "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(413),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("我们可以看到虚拟设备已经创建完成，点击右上角×直接退出此界面。 "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(414),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("顺着最左边的箭头，可以看到刚刚创建的虚拟设备标识，点击右边箭头指向的选项，运行虚拟设备（也可直接在上图中直接点击Actions栏中最左边的三角符号运行。） "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(415),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("等待片刻，模拟器成功打开。"),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(416),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v('此时点击红色方框中"Run app"选项。'),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(417),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("发现刚刚创建的Empty Activity项目成功跑起，这也就证明了你的AndroidStudio已经配置好了。相对于5+APP和uni-app来说，AndroidStudio上手难，"),i("br"),t._v("\n成效低，不少个人开发者转向移动APP开发时都没有接触过它，在初涉AndroidStudio时，好多人在安装配置方面往往报错，我第一次也是如此。"),i("br"),t._v("\n在写这篇教程时我是默认你SDK、API等全配置好了的，如果你在这一步报错，模拟器没能打开或者没能成功显示下图界面，"),i("br"),t._v("\n就说明哪里仍存在问题，后续运行和调试自己的项目时很有可能会报错，建议大家配置完毕再往下进行。"),i("br"),t._v("\nAndroidStudio的配置我就不在赘述，如果有需要后面会考虑附加一篇配置教程。"),i("br"),t._v(" "),i("img",{attrs:{src:r(418),alt:"图片"}}),t._v(" "),i("br")])]),t._v(" "),i("h2",{attrs:{id:"app离线sdk下载"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#app离线sdk下载"}},[t._v("#")]),t._v(" APP离线SDK下载")]),t._v(" "),i("ul",[i("li",[t._v("下载安卓离线SDK包， "),i("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/download/android",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载地址"),i("OutboundLink")],1)])]),t._v(" "),i("blockquote",[i("p",[t._v("这里要吐槽的一点是需要通过百度网盘下载... "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(419),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("下载好后在目录")])]),t._v(" "),i("div",{staticClass:"language-sh extra-class"},[i("pre",{pre:!0,attrs:{class:"language-sh"}},[i("code",[i("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.6")]),t._v(".16"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Android-SDK@2.6.16.80137_20200426"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("SDK"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("libs\n")])])]),i("ul",[i("li",[t._v("下找到")])]),t._v(" "),i("blockquote",[i("p",[t._v("将lib.5plus.base-release.aar、android-gif-drawable-release@1.2.17.aar和miit_mdid_1.0.10.aar（HBuilderX2.8.1之后更新到"),i("code",[t._v("msa_mdid_1.0.13.aar")]),t._v("）拷贝到libs目录下")])]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("lib.5plus.base-release.aar\nandroid-gif-drawable-release@1.2.17.aar\n# 这个文件要根据版本不同进行调整\nmiit_mdid_1.0.10.aar  \n或者\nmsa_mdid_1.0.13.aar\n")])])]),i("ul",[i("li",[t._v("三个文件，复制到自定义的新文件夹方便使用 "),i("strong",[i("code",[t._v("/data")])])]),t._v(" "),i("li",[t._v("在目录")])]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("2.6.16\\Android-SDK@2.6.16.80137_20200426\\SDK\\assets\n")])])]),i("ul",[i("li",[t._v("下找到data文件夹，打开可以发现下图几个文件 "),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(420),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("返回上一级，复制data文件夹如上操作。把这几个文件也放到  "),i("strong",[i("code",[t._v("/data")])]),t._v("  文件下")])]),t._v(" "),i("h2",{attrs:{id:"hbuilderx生成本地打包资源"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#hbuilderx生成本地打包资源"}},[t._v("#")]),t._v(" HBuilderX生成本地打包资源")]),t._v(" "),i("ul",[i("li",[t._v("如图，在发行选项→原生APP-本地打包（L）中选择生成本地打包App资源（R）。"),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(421),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("显示导出成功，顺着路径将自己项目id名的文件夹拷贝，放到上一步自定义的 "),i("strong",[i("code",[t._v("/data")])]),t._v(" 文件夹下，方便使用。这里我的项目id是H525CFE5C，就把它放到与上一步复制的文件一起。"),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(422),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("最终自己建的 "),i("strong",[i("code",[t._v("/data")])]),t._v(" 文件夹下的内容如下截图"),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(423),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("blockquote",[i("p",[t._v("所需资源整理完毕，我们开始进行下一步操作。")])]),t._v(" "),i("h2",{attrs:{id:"安卓离线打包环境配置"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#安卓离线打包环境配置"}},[t._v("#")]),t._v(" 安卓离线打包环境配置")]),t._v(" "),i("ul",[i("li",[t._v("切换到AndroidStudio，如果你第一步操作像我一样只是测试用，那也可以在里面再创建一个Empty Activity项目或者No Activity，在最后我会提到No Activity，这里采用官方文档的方式创建Empty Activity即可。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(424),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("我们可以看到之前默认的是“Android”展示形式，而官方文档里是Project，为了契合我们把它换成下拉列表选项中最上面Project样式。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(425),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("如图。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(426),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("以5+APP举例，将之前整理的"),i("code",[t._v("/data")]),t._v(" 文件夹下的 如下三个文件复制粘贴到libs目录下")])]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("lib.5plus.base-release.aar\n\nandroid-gif-drawable-release@1.2.17.aar\n\nmiit_mdid_1.0.10.aar\n")])])]),i("p",[i("img",{attrs:{src:r(427),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("点击build.grade，下滑到底部资源引用页面")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(428),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("如下图添加引用资源，")])]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("implementation fileTree(dir: 'libs', include: ['*.aar', '*.jar'], exclude: [])\n\nimplementation 'com.github.bumptech.glide:glide:4.9.0' // 基座依赖\n\nimplementation 'com.android.support:support-v4:28.0.0'\n\nimplementation 'com.alibaba:fastjson:1.1.46.android'\n")])])]),i("ul",[i("li",[t._v("点击红色圈中的任一选项进行同步处理。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(429),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("同步完成（这跟后面在AndroidManifest.xml中application节点添加内容相联系，如果没有添加依赖会报红）。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(430),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("在原页面最上方配置app版本号。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(431),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("applicationId为创建时的包名，compileSdkVersion为编译版本，minSdkVersion为兼容最小的版本号，targetSdkVersion为目标版本，有兴趣的可以百度一下三者之间的区别和联系。"),i("br"),t._v("\n注意，官方文档中标注“App离线SDK minSdkVersion最低支持19，小于19在部分4.4以下机型上将无法正常使用。” "),i("br")]),t._v(" "),i("p",[t._v("versionCode需要设定一个数值，一般为1，每次更新版本时versionCode的值都要比前一个设置的值大，否则无法正常安装， "),i("br"),t._v("\nversionName一般填写主版本号次版本号和修正号，如图中的“1.0”为最初版本号，其余的可以自行查阅。")])]),t._v(" "),i("ul",[i("li",[i("p",[t._v("下面配置资源，你可能会奇怪我为什么跟官方文档顺序不一样，官方文档这一步是开始在strings.xml里修改应用名。因为资源导入的先后会影响使用和观感，之前在HBuilderX中生成本地打包的app资源还没引入怎么跟strings.xml里的应用名比较呢。")])]),t._v(" "),i("li",[i("p",[t._v("我们在main文件夹下创建assets文件夹。")])])]),t._v(" "),i("p",[i("img",{attrs:{src:r(432),alt:"图片"}}),t._v(" "),i("br"),t._v(" "),i("img",{attrs:{src:r(433),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("把刚刚转移到自定义文件夹下的 "),i("code",[t._v("/data")]),t._v(" 下的data  文件夹拷贝到assets文件夹下。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(434),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("官方文档中说dcloud1.dat、dcloud2.dat为uni-app所需资源（2.7.0之后已不在需要，升级时需要删除，可以减少apk大小），我演示的是5+App，所以不需要这两个文件。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(435),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("继续在刚刚创建的assets文件夹下创建apps文件夹，把第三步中的文件 "),i("code",[t._v("/data")]),t._v("（我的是H525CFE5C）拷贝到apps文件夹下。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(436),alt:"图片"}}),t._v(" "),i("br"),t._v(" "),i("img",{attrs:{src:r(437),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("自此资源引入完成，进行下一步strings.xml操作。")])]),t._v(" "),i("li",[i("p",[t._v("在app→src→main→res→ values配置strings.xml文件，修改应用名称，与")])])]),t._v(" "),i("p",[i("img",{attrs:{src:r(438),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("刚刚引入本地打包资源的里的manifest.json文件（assets>apps>“应用id名文件夹”>www下）比较，")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(439),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("发现不一致，遂将string.xml里的“Test2020”改为Mood。")])]),t._v(" "),i("li",[i("p",[t._v("在app→src→main下配置AndroidManifest.xml文件，")])])]),t._v(" "),i("p",[i("img",{attrs:{src:r(440),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("在将内容添加到application节点之前，不知道大家发现没，Application标签下红色圈中内部也有activity,"),i("br"),t._v("\n它和即将添加的activity之间会不会有冲突呢。实际上使用AndroidStudio开发软件时，"),i("br"),t._v('\n一个activity的使用要在AndroidManifest.xml中声明，我们在第一步末尾运行时发现最后输出了"Hello World!"字样的界面。'),i("br")]),t._v(" "),i("p",[t._v('仔细观察图中圈出的activity，作为"Run App"跑出来的页面，它在AndroidManifest.xml文件中'),i("intent-filter"),t._v("标签内做出了主页声明，"),i("br"),t._v("\n如果你不考虑这点直接忽略它的话，在模拟器上跑时也许会生成两个相同图标的app，分别打开后一个是“Hello World!”界面，"),i("br"),t._v("\n一个是你项目自定义的首页如index.html，也有一定可能无法正常运行，所以最好的办法是直接注释掉。"),i("br")],1)]),t._v(" "),i("ul",[i("li",[i("p",[t._v("然后继续下一步，添加内容到application节点（建议复制官方文档里的，下面的复制粘贴后排版会比较乱）。")])]),t._v(" "),i("li",[i("p",[t._v("代码")])])]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v('<activity     \n\nandroid:name="io.dcloud.PandoraEntry"                    android:configChanges="orientation|keyboardHidden|keyboard|navigation"     \n\nandroid:label="@string/app_name"     \n\nandroid:launchMode="singleTask"     \n\nandroid:hardwareAccelerated="true"     \n\nandroid:theme="@style/TranslucentTheme"   \n\nandroid:screenOrientation="user"   \n\nandroid:windowSoftInputMode="adjustResize" >     \n\n<intent-filter>         \n\n<action android:name="android.intent.action.MAIN" />         \n\n<category android:name="android.intent.category.LAUNCHER" />   \n\n</intent-filter> \n\n</activity> \n\n<activity     \n\nandroid:name="io.dcloud.PandoraEntryActivity"\n\nandroid:launchMode="singleTask"      android:configChanges="orientation|keyboardHidden|screenSize|mcc|mnc|fontScale|keyboard"      android:hardwareAccelerated="true"      android:permission="com.miui.securitycenter.permission.AppPermissionsEditor"      android:screenOrientation="user"\n\nandroid:theme="@style/DCloudTheme"     \n\nandroid:windowSoftInputMode="adjustResize">     \n\n<intent-filter>         \n\n<category android:name="android.intent.category.DEFAULT" />     \n\n<category android:name="android.intent.category.BROWSABLE" />\n\n<action android:name="android.intent.action.VIEW" />         \n\n<data android:scheme="h56131bcf" />     \n\n</intent-filter> \n\n</activity> \n')])])]),i("ul",[i("li",[t._v("如下图。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(441),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("h2",{attrs:{id:"下面是应用图标和启动页面的配置"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#下面是应用图标和启动页面的配置"}},[t._v("#")]),t._v(" 下面是应用图标和启动页面的配置")]),t._v(" "),i("ul",[i("li",[t._v("官方文档")])]),t._v(" "),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("icon.png为应用的图标，push.png为推送消息的图标，splash.png为应用启动页的图标，"),i("br"),t._v("\n只要将icon.png、push.png、splash.png放置到drawable，drawalbe-ldpi，drawable-mdpi，drawable-hdpi，drawable-xhdpi，drawable-xxhdpi文件夹下，"),i("br"),t._v("\n就会自动引用，不同文件夹下对应不同图片尺寸，可参考 "),i("a",{attrs:{href:"https://blog.csdn.net/xuaho0907/article/details/72848520",target:"_blank",rel:"noopener noreferrer"}},[t._v("android（drawable文件夹）图片适配"),i("OutboundLink")],1),i("br")])]),t._v(" "),i("ul",[i("li",[i("p",[t._v("里面说的比较清楚，我就不多此一举了，我举另外的例子，通过AndroidStudio软件修改应用图标。")])]),t._v(" "),i("li",[i("p",[t._v("在应用目录内部右键调出菜单（New→Image Asset），点击")])])]),t._v(" "),i("p",[i("img",{attrs:{src:r(442),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("出来应用图标设置界面。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(443),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("修改背景为红色。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(444),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("修改前景为文字M。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(445),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("点击Finish。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(446),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("h2",{attrs:{id:"下面配置资源环境。"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#下面配置资源环境。"}},[t._v("#")]),t._v(" 下面配置资源环境。")]),t._v(" "),i("ul",[i("li",[t._v("将assets下apps文件夹中的manifest.json文件和data文件夹中的dcloud_control.xml文件打开，确保manifest.json中的id和dcloud_control.xml中的appid一致。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(447),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("自定义基座暂不考虑。")])]),t._v(" "),i("li",[i("p",[t._v("然后就可以愉快地调试程序啦，")])]),t._v(" "),i("li",[i("p",[t._v("Run~")])])]),t._v(" "),i("p",[i("img",{attrs:{src:r(448),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("图标")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(449),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("打开。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(450),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("效果。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(451),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("h2",{attrs:{id:"签名打包"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#签名打包"}},[t._v("#")]),t._v(" 签名打包")]),t._v(" "),i("ul",[i("li",[t._v("在菜单栏中选择Build，点击Generate Signed Bundle /APK...项，进入打包页面。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(452),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("选中APK，点击Next。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(453),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("打包需要签名认证，点击Create new...创建。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(454),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("如图，第一行创建自定义jks文件，并确定路径，我把它设置为Mood（这种其实是不符合jks格式的，最后生成时可能会有警告，点击OK即可，一般为*-*-*jks，平时还是要多注意规范）。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(455),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("填写密钥库密码和确定密钥库密码，因为是演示，我把密码设置为123456。")])]),t._v(" "),i("li",[i("p",[t._v("Alias为密钥名称，在这里把它设置mood，Password为密钥密码，仍设置为123456，Validity(years)为密钥有效时间，按年算起，直接默认。")])]),t._v(" "),i("li",[i("p",[t._v("下面First and Last Name为名字和姓氏 ，Organizational Unit为组织单位 ，Organization为组织，City or Locality为城市或地区，State or Province为州或者省份，Country Code(XX)为国家 ，至少选填一种，这里我们直接填上国家China。")])]),t._v(" "),i("li",[i("p",[t._v("点击OK。")])])]),t._v(" "),i("p",[i("img",{attrs:{src:r(456),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("跳转到签名界面，因为都帮我们填好了，所以点击Next即可。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(457),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("这里要说一下V1和V2的选择问题，V1属于旧的验证方式，V2是在安卓版本7.0之后新的验证方式，只勾选V1在Android7.0以上不会使用更安全的验证方式，如果只勾选V2那么安卓版本7.0以下的手机将无法正常安装，所以建议V1和V2同时勾选。")])]),t._v(" "),i("ul",[i("li",[t._v("debug和release不用多说，一个是测试版一个是正式版，这里我直接选择release，点击Finish，等待打包完成。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(458),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("完成打包，点击locate或者直接进入到AndroidStudio项目文件夹app>release下，")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(459),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("找到app-release.apk包，安装。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(460),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("打开。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(461),alt:"图片"}}),t._v(" "),i("br"),t._v(" "),i("img",{attrs:{src:r(462),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("p",[t._v("教程结束。")]),t._v(" "),i("h2",{attrs:{id:"总结"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),i("p",[t._v("不知道大家发现没有，上面都是在创建Empty Activity的基础上进行打包配置的，Empty Activity在app>src>main>java>自定义包名a.b.c的目录下默认生成MainActivity文件，"),i("br"),t._v("\n这个文件又绑定了一个layout文件，默认是在app>src>main>res>layout目录下的activity_main.xml文件，在AndroidManifest.xml文件中做出activity声明，"),i("br"),t._v("\n最后我们还要把这个activity注释或者删除掉，这也就代表MainActivity文件和activity_main.xml文件没有效用了，蚊子再小也是肉，删掉还可以缩小点app体积。"),i("br")]),t._v(" "),i("p",[t._v("其实没必要后期删除那么麻烦，大家只需在第一步创建Empty Activity项目用来测试AndroidStudio开发环境即可，在第四步开始时，New>New Project创建No Activity用来打包自己的项目，"),i("br"),t._v("\n点击Next，下一页同第一步一样自定义，然后点击Finish，这样一个NoActivity项目就创建完毕啦。"),i("br")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(463),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("在AndroidManifest.xml页我们可以看到如下页面：")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(464),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("只需把它修改为这样。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(465),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[t._v("再添加内容。")])]),t._v(" "),i("p",[i("img",{attrs:{src:r(466),alt:"图片"}}),t._v(" "),i("br")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("后续步骤都是一样的，这样可以避免在AndroidManifest.xml中注释或删除默认activity，也省去了删除默认文件的麻烦。")])]),t._v(" "),i("li",[i("p",[t._v("官方文档中附加的内容：")])]),t._v(" "),i("li",[i("p",[t._v("基座配置文档")])])]),t._v(" "),i("p",[i("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35482",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ask.dcloud.net.cn/article/35482"),i("OutboundLink")],1)]),t._v(" "),i("ul",[i("li",[t._v("安卓模块及第三方SDK配置：")])]),t._v(" "),i("p",[i("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/usemodule/android",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nativesupport.dcloud.net.cn/AppDocs/usemodule/android"),i("OutboundLink")],1)]),t._v(" "),i("ul",[i("li",[t._v("Android注意事项：")])]),t._v(" "),i("p",[i("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/FAQ/android",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nativesupport.dcloud.net.cn/AppDocs/FAQ/android"),i("OutboundLink")],1)]),t._v(" "),i("details",{staticClass:"custom-block details"},[i("summary",[t._v("自己随手整理的txt他文档")]),t._v(" "),i("p",[t._v("从外到内")]),t._v(" "),i("p",[t._v("android  studio   sdk   9.0  版本")]),t._v(" "),i("p",[t._v("①  提取需要使用的安卓离线SDK包  内容")]),t._v(" "),i("p",[t._v("2.7.5\\Android-SDK@2.7.5.80183_20200519\\SDK\\libs  找到 一下文件")]),t._v(" "),i("p",[t._v("lib.5plus.base-release.aar   android-gif-drawable-release@1.2.17.aar  uniapp-release.aar")]),t._v(" "),i("p",[t._v("2.7.5\\Android-SDK@2.7.5.80183_20200519\\SDK\\assets 找到  data  文件夹   和上边的  放到一起备用")]),t._v(" "),i("p",[t._v("打包出项目文件 类似  xmanv/www    和上边的放到一起")]),t._v(" "),i("p",[t._v("完成以上内容  开始进行接下来  配置")]),t._v(" "),i("p",[t._v("①最外层 build-gradle  --------------------------------------------")]),t._v(" "),i("p",[t._v("buildscript {\nrepositories {\nmaven{ url 'http://maven.aliyun.com/nexus/content/groups/public/'}   //添加\nmaven{ url 'http://maven.aliyun.com/nexus/content/repositories/jcenter' }  //添加\ngoogle()\njcenter()\n}\ndependencies {\nclasspath \"com.android.tools.build:gradle:4.0.1\"")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",[i("code",[t._v("    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n}\n")])])]),i("p",[t._v("}")]),t._v(" "),i("p",[t._v("allprojects {\nrepositories {\nmaven{ url 'http://maven.aliyun.com/nexus/content/groups/public/'}//添加\nmaven{ url 'http://maven.aliyun.com/nexus/content/repositories/jcenter' }//添加\ngoogle()\njcenter()\n}\n}")]),t._v(" "),i("p",[t._v("②  修改  app下的 build-gradle  文件   --------------------------------------------")]),t._v(" "),i("p",[t._v("上边的  android  添加")]),t._v(" "),i("p",[t._v("aaptOptions {")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",[i("code",[t._v("    additionalParameters '--auto-add-overlay'\n\n    ignoreAssetsPattern \"!.svn:!.git:.*:!CVS:!thumbs.db:!picasa.ini:!*.scc:*~\"\n")])])]),i("p",[t._v("}")]),t._v(" "),i("p",[t._v("下边的  dependencies  添加")]),t._v(" "),i("p",[t._v("implementation fileTree(dir: 'libs', include: ['"),i("em",[t._v(".aar', '")]),t._v(".jar'], exclude: [])")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",[i("code",[t._v("implementation 'com.android.support:support-v4:28.0.0'\n\nimplementation 'com.android.support:appcompat-v7:28.0.0'\n\nimplementation 'com.android.support:recyclerview-v7:28.0.0'\n\nimplementation 'com.facebook.fresco:fresco:1.13.0'\n\nimplementation \"com.facebook.fresco:animated-gif:1.13.0\"\n\nimplementation 'com.github.bumptech.glide:glide:4.9.0'\n\nimplementation 'com.alibaba:fastjson:1.1.46.android'\n")])])]),i("p",[t._v("完成后记得 点 右上角的同步")]),t._v(" "),i("p",[t._v("②+  修改  AndroidManifest.xml  文件    参考 https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android")]),t._v(" "),i("p",[i("activity",{attrs:{"android:name":"io.dcloud.PandoraEntry","android:configChanges":"orientation|keyboardHidden|keyboard|navigation","android:label":"@string/app_name","android:launchMode":"singleTask","android:hardwareAccelerated":"true","android:theme":"@style/TranslucentTheme","android:screenOrientation":"user","android:windowSoftInputMode":"adjustResize"}},[i("intent-filter",[i("action",{attrs:{"android:name":"android.intent.action.MAIN"}}),t._v(" "),i("category",{attrs:{"android:name":"android.intent.category.LAUNCHER"}})],1)],1),t._v(" "),i("activity",{attrs:{"android:name":"io.dcloud.PandoraEntryActivity","android:launchMode":"singleTask","android:configChanges":"orientation|keyboardHidden|screenSize|mcc|mnc|fontScale|keyboard","android:hardwareAccelerated":"true","android:permission":"com.miui.securitycenter.permission.AppPermissionsEditor","android:screenOrientation":"user","android:theme":"@style/DCloudTheme","android:windowSoftInputMode":"adjustResize"}},[i("intent-filter",[i("category",{attrs:{"android:name":"android.intent.category.DEFAULT"}}),t._v(" "),i("category",{attrs:{"android:name":"android.intent.category.BROWSABLE"}}),t._v(" "),i("action",{attrs:{"android:name":"android.intent.action.VIEW"}}),t._v(" "),i("data",{attrs:{"android:scheme":"h56131bcf"}})],1)],1)],1),t._v(" "),i("p",[t._v("③  设置  Settings    --------------------------------------------")]),t._v(" "),i("p",[t._v("在菜单栏File点击Settings     找到  system settings   找到  HTTP Proxy   然后 选 auto-detect proxy setttings   勾选  并 添加  mirrors.neusoft.edu.cn:80")]),t._v(" "),i("p",[t._v("③+  把 android-gif-drawable-release@1.2.17  lib.5plus.base-release.aar  uniapp-release.aar  放到 libs文件夹下")]),t._v(" "),i("p",[t._v("④   引入项目资源文件  --------------------------------------------")]),t._v(" "),i("p",[t._v("在main文件夹下创建assets文件夹。  然后把   之前整理的  data文件 方法进去")]),t._v(" "),i("p",[t._v("在 assets  里面新建 apps  然后把  之前整理的  打包 xmanv/www  拷贝进去")]),t._v(" "),i("p",[t._v("⑤    res/values/strings.xml")]),t._v(" "),i("resources",[i("string",{attrs:{name:"app_name"}},[t._v("xmanv.com 此处")]),t._v("  和  manifest.json  name 一致\n")],1),t._v(" "),i("p",[t._v("data/dcloud_control.xml")]),t._v(" "),i("hbuilder",[i("apps",[i("app",{attrs:{appid:"__UNI__2A3FCAC 此处",appver:""}}),t._v("  和  manifest.json  id 一致 \n")],1)],1),t._v(" "),i("p",[t._v("AndroidManifest.xml")]),t._v(" "),i("p",[t._v('<application\nandroid:allowBackup="true"\nandroid:icon="@mipmap/ic_launcher"\nandroid:label="xmanv.com 此处"                     和  manifest.json  name 一致')])],1)])}),[],!1,null,null,null);a.default=n.exports}}]);